Chapter 2  Resource Location and Traffic Routing
|
|    We’ll first have a look at how IP addresses identify hosts on a network.
|
|    we’ll discuss routing, or sending traffic between network hosts that aren’t directly connected.
|
|    cover some common routing protocols.
|
|    discuss domain name resolution (the process of translating human-readable names to IP addresses),
|
|    potential privacy implications of DNS, and the solutions to overcome those privacy concerns.
|
|    You’ll need to understand these topics to provide comprehensive net-work services and locate the resources used by your services, 
|    such as third-party application programming interfaces (APIs).
|    برای ارائه خدمات جامع شبکه و مکان یابی منابع مورد استفاده توسط سرویس های خود،
|    مانند رابط های برنامه نویسی برنامه های کاربردی شخص ثالث باید این موضوعات را درک کنید.
|
|
|    This information should also help you debug inevitable network outages or performance issues your code may encounter. 
|    این اطلاعات همچنین باید به شما در رفع اشکالات اجتناب ناپذیر شبکه یا مشکلات عملکردی که ممکن است کد شما با آن مواجه شود کمک کند.
|
|

The Internet Protocol:
|   The Internet Protocol (IP) is a set of rules that dictate the format of data sent over a network—specifically, the internet.
|   پروتکل اینترنت مجموعه‌ای از قوانین است که فرمت داده‌های ارسال شده از طریق یک شبکه - به‌ویژه اینترنت را تعیین می‌کند.
|   
|   IP addresses identify nodes on a network at the internet layer of the TCP/IP stack.
|   you use them to facilitate communication between nodes.
|   
|   nodes send packets to other nodes by addressing packets to the destination node’s IP address.
|   
|   Just as it’s customary to include a return address on postal mail, packet headers include the IP address of the origin node as well.
|   همانطور که مرسوم است یک آدرس برگشتی در پاکت پستی درج شود، سرصفحه های بسته شامل آدرس آی‌پی گره مبدا نیز می شود.

IPv4 Addressing:
|   IPv4 addresses are 32-bit numbers arranged in four groups of 8 bits (called octets) separated by decimal points.
|   
|   The total range of 32-bit numbers limits us to just over four billion possible IPv4 addresses.

Network and Host IDs:
|   The 32 bits that compose an IPv4 address represent two components:
|   1- network ID 
|   2- host ID
|   
|   portion= بخش
|   
|   Figure 2-4 shows the IP address 192.168.156.97 divided into its network ID and host ID. This IP address is part of a 16-bit network. 
|   This tells us that the first 16 bits form the network ID and the remaining 16 bits form the host ID.

Subdividing IPv4 Addresses into Subnets:
|   IPv4’s network and host IDs allow you to subdivide, or partition, 
|   the more than four billion IPv4 addresses into smaller groups to keep the network secure and easier to manage. 
|   All IP addresses in these smaller networks, called subnets, share the same network ID but have unique host IDs.
|   The size of the network dictates the number of host IDs and, therefore, the number of individual IP addresses in the network.
|      
|   individual=  شخصی   

Allocating Networks with CIDR:  تخصیص شبکه با سی‌آی‌دی‌آر
|   Classless Inter-Domain Routing(CIDR). مسیریابی بین دامنه‌ای بدون کلاس 
|   
|   In CIDR, you indicate the number of bits in the network ID 
|   by appending a network prefix to each IP address, consisting of a forward slash and an integer. 
|   
|   you call it a prefix rather than a suffix because it indicates 
|   how many of the IP address’s most significant bits, or prefixed bits, constitute the network ID.
|   
|   For example, you’d write the IP address 192.168.156.97 from Figure 2-4 as 192.168.156.97/16 in CIDR notation, 
|   indicating that it belongs to a 16-bit network and that the network ID is the first 16 bits of the IP address.
|   From there, you can derive the network IP address by applying a subnet mask.
|
|   Subnet masks encode the CIDR network prefix in its decimal representation.
|   ماسک های زیرشبکه پیشوند شبکه را در نمایش دهدهی آن رمزگذاری می کنند.
|   They are applied to an IP address using a bitwise AND to derive the network ID.
|   آنها با استفاده از بیتی "اند" برای استخراج شناسه شبکه به یک آدرس آی‌پی اعمال می شوند.
|   
|   You may have noticed that the number of usable hosts per network is two less than expected 
|   in each row because each network has two special addresses.
|   
|   Take 192.168.0.0/16, for example. The first IP address in the network is 192.168.0.0. This is the network address. 
|   The last IP address in the network is 192.168.255.255, which is the broadcast address. 
|   For now, understand that you do not assign the network IP address or the broadcast IP address to a host’s network interface. 
|   These special IP addresses are used for routing data between networks and broadcasting, respectively.
|   
|   The 31- and 32-bit network prefixes are purposefully absent from Table 2-1, 
|   largely because they are beyond the scope of this book. 
|   If you’re curious about 31-bit network prefixes, RFC 3021 covers their application.
|   A 32-bit network prefix signifies a single-host network. For example, 192.168.1.1/32 
|   represents a subnetwork of one node with the address 192.168.1.1.

Allocating Networks That Don’t Break at an Octet Boundary: تخصیص شبکه هایی که در یک مرز هشتگانه شکسته نمی شوند
|   Some network prefixes don’t break at an octet boundary. 
|   Figure 2-5 derives the network ID and host ID of 192.168.156.97 in a 19-bit network.
|   In this case, since the network prefix isn’t a multiple of 8 bits, an octet’s bits are split between the network ID and host ID.
|   
|   Appending a zeroed host ID to the network ID results in the network address. 
|   اضافه کردن یک شناسه میزبان صفر شده به شناسه شبکه منجر به آدرس شبکه می شود.
|   
|   In a comparable manner= به روشی قابل مقایسه


Private Address Spaces and Localhost: فضاهای آدرس خصوصی و لوکال هاست
|   RFC 1918 details the private address spaces of 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16 for use in local networks
|   
|   In addition, each host has the 127.0.0.0/8 subnet designated as its local subnet.

Ports and Socket Addresses:
|   The operating system uses ports to uniquely identify data transmission between nodes 
|   for the purposes of multiplexing the outgoing application data and demultiplexing the incoming data back to the proper application.
|   
|   The combination of an IP address and a port number is a "socket address", typi-cally written in the format "address:port".
|   
|   Ports are 16-bit unsigned integers. پورت ها اعداد صحیح بدون علامت 16 بیتی هستند
|   
|   Port numbers 0 to 1023 are well-known ports assigned to common services by the "Internet Assigned Numbers Authority"(IANA).
|   
|   For example:
|       HTTP uses port 80. 
|       Port 443 is the HTTPS port. 
|       SSH servers typically listen on port 22.
|   
|   Despite= با وجود
|   
|   Despite these ports being well-known, there is no restriction on which ports services may use
|   he IANA designates ports 1024 to 49151 as semi-reserved for lesser common services. 
|   Ports 49152 to 65535 are ephemeral ports meant for client socket addresses as recommended by the IANA. 
|   (The port range used for client socket addresses is operating-system dependent.)
|   
|   A common example of port usage is the interaction between your web browser and a web server.
|   our web browser’s socket address and the web server’s socket address (server IP and port 80) 
|   uniquely identify this transaction. This allows your operating system to properly demultiplex 
|   the response and pass it along to the right application (that is, your web browser).


Network Address Translation: NAT
|   The four billion IPv4 addresses may seem like a lot until you consider there will be 
|   an estimated 24.6 billion Internet of Things (IoT) devices by 2025, according to 
|   the Ericsson Mobility Report of June 2020   
|   https://www.ericsson.com/en/mobility-report/reports/june-2020/iot-connections-outlook/
|   In fact, we’ve already run out of unreserved IPv4 addresses. 
|   The IANA allocated the last IPv4 address block on January 31, 2011.
|   
|   A process that allows numerous nodes to share the same public IPv4 address.
|   فرآیندی که به گره های متعدد اجازه می دهد تا آدرس IPv4 عمومی یکسانی را به اشتراک بگذارند.
|   
|   It requires a device, such as a firewall, load balancer, or router that can keep track of incoming 
|   and outgoing traffic and properly route incoming traffic to the correct node.
|   به دستگاهی مانند فایروال، متعادل کننده بار یا روتر نیاز دارد 
|   که بتواند ترافیک ورودی و خروجی را ردیابی کند و ترافیک ورودی را به درستی به گره صحیح هدایت کند.
|   
|   The important thing to remember with network address translation 
|   is that a node’s private IPv4 address behind a NAT device is not visible or directly accessible to
|   other nodes outside the network address–translated network segment.
|   
|   If you’re writing a service that needs to provide a public address for its clients, 
|   you may not be able to rely on your node’s private IPv4 address if it’s behind a NAT device.
|   Hosts outside the NAT device’s private network cannot establish incoming connections. 
|   Only clients in the private network may establish connections through the NAT device. 
|   Instead, your service must rely on the NAT device’s properly forwarding a port 
|   from its public IP to a socket address on your node.

Unicasting, Multicasting, and Broadcasting:
|   Sending packets from one IP address to another IP address is known as unicast addressing.
|   But TCP/IP’s internet layer supports IP multicasting, or sending a single message to a group of nodes.
|   
|   Broadcasting is the ability to concurrently deliver a message to all IP addresses in a network.


Resolving the MAC Address to a Physical Network Connection:
|   حل کردن آدرس مک به یک اتصال فیزیکی شبکه
|   
|   The MAC address is relevant to only the local network, 
|   so routers cannot use a MAC address to route data across network boundaries.
|   Instead, they can route traffic across network boundaries by using an IPv4 address. 
|   Once a packet reaches the local network of a destination node, 
|   the router sends the data to the destination node’s MAC address and, 
|   finally, to the destination node’s physical network connection.
|   
|   The Address Resolution Protocol(AR P),detailed in RFC 826
|   https://tools.ietf.org/html/rfc826/
|   OR
|   https://datatracker.ietf.org/doc/html/rfc826/   
|   
|   finds the appropriate MAC address for a given IP address a process called "resolving" the MAC address.
|   Nodes maintain ARP tables that map an IPv4 address to a MAC address.
|   If a node does not have an entry in its ARP table for a destination IPv4 address, 
|   the node will send a request to the local network’s broadcast address asking, 
|   “Who has this IPv4 address? Please send me your MAC address. Oh, and here is my MAC address.”
|   The destination node will receive the ARP request and respond with an ARP reply to the originating node. 
|   The originating node will then send the data to the destination node’s MAC address. 
|   Nodes on the network privy to this conversation will typically update their ARP tables with the values.


IPv6 Addressing:
|   IPv6 addresses are 128-bit numbers arranged in eight colon-separated groups of 16 bits, or hextets. 
|   There are more than 340 unde-cillion (2 ** 128) IPv6 addresses.

Writing IPv6 Addresses:
|   In binary form, IPv6 addresses are a bit ridiculous to write.
|   In the interest of legibility and compactness, we write IPv6 addresses with lowercase hexa-decimal values instead.
|   IPv6 hexadecimal values are case-insensitive.
|   However, the Internet Engineering Task Force (IETF) recommends using lowercase values.
|   
|   A hexadecimal (hex) digit represents 4 bits, or a nibble, of an IPv6 address.
|   Figure 2-9 illustrates the same IPv6 address in binary and hex.
|   
|   succinct= مختصر


Simplifying IPv6 Addresses:
|   ساده سازی آدرس ها ورژن ۶
|   
|   consecutive= متوالی
|   
|   First, you can remove all leading zeros in each hextet. 
|   This simplifies your address without changing its value. 
|   It now looks like this: 
|   fd00:4700:10:0:0:0:6814:d103
|   
|   Second, you can replace the leftmost group of consecutive, 
|   zero-value hextets with double colons, 
|   producing the shorter 
|   fd00:4700:10::6814:d103
|   
|   Result:
|       fd00:4700:10:0:0:0:6814:d103
|       fd00:4700:10::6814:d103
|   
|   Otherwise, it’s impossible for routers to accurately determine the number of hextets 
|   to insert when repopulating the full address from its compressed representation. 


Internet Assigned Numbers Authority (IANA) مرجع شماره های اختصاص داده شده اینترنت


IPv6 Network and Host Addresses:
|   Like IPv4 addresses, IPv6 addresses have a network address and a host address. 
|   IPv6’s host address is commonly known as the "interface ID".
|   The net-work and host addresses are both 64 bits, as shown in Figure 2-10.
|   
|   1- The first 48 bits of the network address are known as the global routing prefix(GRP)
|   2- the last 16 bits of the network address are called the subnet ID
|   3- 64 bits / 4 hextet  interface ID
|   
|   The GRP gets determined for you when you request a block of IPv6 addresses from your ISP.
|   IANA assigns the first hextet of the GRP to a regional internet registry 
|   (an organization that handles the allocation of addresses for a global region).   
|   The regional internet registry then assigns the second GRP hextet to an ISP.   
|   The ISP finally assigns the third GRP hex-tet before assigning a 48-bit subnet of IPv6 addresses to you.
|   
|   For more information on the allocation of IPv6 addresses, see IANA’s “IPv6 Global Unicast Address Assignments” document at:
|   https://www.iana.org/assignments/ipv6-unicast-address-assignments/ipv6-unicast-address-assignments.xml   
|   
|   IANA’s “Internet Protocol Version 6 Address Space” document at:
|   https://www.iana.org/assignments/ipv6-address-space/ipv6-address-space.xhtml      

IPv6 Address Categories:
|   1- anycast
|   2- multicast
|   3- unicast

Unicast Addresses:
|   A unicast IPv6 address uniquely identifies a node. 
|   If an originating node sends a message to a unicast address, 
|   only the node with that address will receive the message, as shown in Figure 2-11.

# Whereas = درحالیکه

Multicast Addresses:
|   Multicast addresses represent a group of nodes. 

Anycast Addresses:
|   An anycast address represents a group of nodes listening to the same address. 
|         
|   A message sent to an anycast address goes to the nearest node listening to the address.
|   The nearest node isn’t always the most physically close node. 
|   It is up to the router to determine which node receives the message, usually the node
|   with the least latency between the origin and the destination. 
|   Aside from reducing latency, anycast addressing increases redundancy and can geolocate services.
|   
|   example:      
|   t’s unlikely you access servers across an ocean when streaming Netflix. 
|   Instead, Netflix geo-locates servers close to you so that your experience is ideal.


Advantages of IPv6 over IPv4: مزایا
|   - efficiency, 
|   - autoconfiguration, 
|   - security.

# mandatory = اجباری

Simplified Header Format for More Efficient Routing: فرمت هدر ساده شده برای مسیریابی کارآمدتر
|   The IPv4 header contains mandatory yet rarely used fields.    
|   هدر آی‌پی-۴‌ حاوی فیلدهای اجباری است که به ندرت استفاده می شود.
|   IPv6 makes these fields optional.
|   
|   IPv6 also lessens the loads on routers and other hops by ensuring that headers 
|   require minimal processing, eliminating the need for checksum calculation at every hop.

Stateless Address Autoconfiguration (SLAAC): پیکربندی خودکار آدرس بدون حالت
|   Nodes using IPv6 can automatically configure or derive their IPv6 addresses through stateless address autoconfiguration(SLAAC)
|   
|   When connected to an IPv6 network, 
|   a node can solicit the router for its network address parameters using the Neighbor Discovery Protocol(NDP).پروتکل کشف همسایه 
|
|   NDP leverages the Internet Control Message Protocol.
|   از پروتکل پیام کنترل اینترنت استفاده می کند
|   It performs the same duties as IPv4’s ARP
|   
|   router solicitation = درخواست روتر
|   
|   Once the node receives a reply from the router with the 64-bit net-work address, 
|   the node can derive the 64-bit host portion of its IPv6 address on its own using 
|   the 48-bit MAC address assigned to its network interface. 
|   The node appends the 16-bit hex FFFE to the first three octets of the MAC address known as the originally unique identifier (OUI).
|   To this, the node appends the remaining three octets of the MAC address, the network inter-face controller (NIC) identifier. 
|   The result is a unique 64-bit interface ID, as shown in Figure 2-14.

Native IPsec Support:
|   IPv6 has native support for IPsec, a technology that allows multiple nodes 
|   to dynamically create secure connections between each other, ensuring that traffic is encrypted.


The Internet Control Message Protocol:
|   Source: https://www.cloudflare.com/learning/ddos/glossary/internet-control-message-protocol-icmp/
       What is the Internet Control Message Protocol (ICMP)?
       The Internet Control Message Protocol (ICMP) is a network layer protocol 
       used by network devices to diagnose network communication issues. 
       
       What is ICMP used for?
       1- The primary purpose of ICMP is for error reporting.   
          For example, if a packet of data is too large for a router, 
          the router will drop the packet and send an ICMP message back to the original source for the data.
       2- A secondary use of ICMP protocol is to perform network diagnostics.
          the commonly used terminal utilities traceroute and ping both operate using ICMP.
          
          The traceroute utility is used to display the routing path between two Internet devices.
          The journey between one router and another is known as a ‘hop,’ 
          and a traceroute also reports the time required for each hop along the way.
       
          The ping utility is a simplified version of traceroute.
          A ping will test the speed of the connection between two devices 
          and report exactly how long it takes a packet of data to reach its destination and come back to the sender’s device.
       
       How does ICMP work?
       ICMP is not associated with a transport layer protocol such as TCP or UDP. 
       This makes ICMP a connectionless protocol: 
       one device does not need to open a connection with another device before sending an ICMP message. 
       The ICMP protocol also does not allow for targeting a specific port on a device.
       
       What is an ICMP packet?
       An ICMP packet is a packet that uses the ICMP protocol. 
       ICMP packets include an ICMP header after a normal IP header. 
       When a router or server needs to send an error message, 
       the ICMP packet body or data section always contains 
       a copy of the IP header of the packet that caused the error.
       
       How is ICMP used in DDoS attacks?
       1- ICMP flood attack:
           A ping flood or ICMP flood is when the attacker attempts to overwhelm a targeted device with ICMP echo-request packets. 
   
       2- Ping of death attack:
           Is when the attacker sends a ping larger than the maximum allowable size for a packet to a targeted machine, 
           causing the machine to freeze or crash.    
           The ping of death attack is largely historical at this point. 
           However, older networking equipment could still be susceptible to it.
   
       3- Smurf attack:
           In a Smurf attack, the attacker sends an ICMP packet with a spoofed source IP address. 
           Networking equipment replies to the packet, sending the replies to the spoofed IP 
           and flooding the victim with unwanted ICMP packets. Like the 'ping of death,' 
           today the Smurf attack is only possible with legacy equipment.       
<---< Line 374      *****  ATTENTION ******
|   
|   The Internet Protocol relies on the Internet Control Message Protocol(ICMP) to give it feedback about the local network.
|   
|   ICMP can:
|       inform you of network problems, 
|       unreachable nodes or networks, 
|       local network configuration, 
|       proper traffic routes, 
|       network time-outs.    
|   
|   Network events often result in ICMP response messages.
|
|   Routers use ICMP to help inform you of better routes to your destina-tion node.
|   
|   If you send data to a router that isn’t the appropriate or best router to handle traffic for your destination, 
|   it may reply with an ICMP redirectmessage after forwarding your data onto the correct router. 
|
|   You can determine whether a node is online and reachable by using an ICMP echo request (also called a ping).
|   If the destination is reachable and receives your ping, it will reply with its own ICMP echo reply message (also called a pong).
|   If the destination isn’t reachable, the router will respond with a destination unreachable message.
|   
|   ICMP can also notify you when data reaches the end of its life before delivery.
|   Every IP packet has a time-to-live value that dictates the maximum number of hops 
|   the packet can take before its lifetime expires. The packet’s time-to-live value is 
|   a counter and decrements by one for every hop it takes. 
|   You will receive an ICMP time exceeded message if the packet you sent doesn’t reach 
|   its destination by the time its time-to-live value reaches zero.
|
|   IPv6’s NDP relies heavily on ICMP router solicitation messages to prop-erly configure a node’s NIC.


Internet Traffic Routing:
|   nodes won’t have a direct connection, so they’ll have to make use of intermediate nodes to transfer data. 
|   igure 2-15 shows that process.
|
|   The intermediate nodes are typically routers or firewalls that control the path data takes from one node to the ot her. 
|   
|   "Firewalls" control the flow of traffic in and out of a network, primarily to secure networks behind the firewall.
|   No matter what type of node they are, intermediate nodes have a net-work stack associated with each network interface. 
|   The data climbs the stack to Layer 3, where it’s handed off to the outgoing network interface’s stack.
|   The data then makes its way to Node 2’s incoming network interface before ultimately being routed to the server.
|
|   Layer 3 on both the incoming and outgoing NICs speak IPv4, (NIC= the network inter-face controller)
|   which routes the packet between the two interface network stacks.
|   The outgoing NIC’s Layer 2 receives the packet from its Layer 3 
|   and encapsulates it before sending the frame onto its Layer 1 as bits.


# relies = متکی است
# own criteria = معیار های خود


Routing Protocols:
|   the routing process relies on a symphony of protocols to make sure each packet 
|   reaches its destination no matter the physical medium traversed or network outages along the way.  
|   سیستمی داره که مطمعن بشه پکت ها به مقصد می رسه
|   
|   Routing protocols have their own criteria for determining the best path between nodes.
|   Some protocols determine a route’s efficiency based on hop count.   
|   برخی از پروتکل ها کارایی مسیر را بر اساس تعداد پرش تعیین می کنند
|
|   Some may use bandwidth. 
|   Others may use more complicated means to determine which route is the most efficient.
|   
|   Routing protocols are either internal or external depending on whether they route packets within an autonomous system or outside of one. 
|   An autono-mous system is an organization that manages one or more networks. 
|
|   An ISP is an example of an autonomous system. 
|   Each autonomous system is assigned an autonomous system number (ASN), 
|   as outlined in RFC 1930 
|   (https://tools.ietf.org/html/rfc1930/). 
|
|   This ASN is used to broadcast an ISP’s network information to other autonomous systems using an external routing protocol.
|   این ای‌اس‌ان برای پخش اطلاعات شبکه یک آی‌اس‌پی به سایر سیستم های مستقل با استفاده از یک پروتکل مسیریابی خارجی استفاده می شود.
|
|   An external routing protocol routes data between autonomous systems.
|   The only routing protocol we’ll cover is BGP since it is the glue of the internet, binding all ASN-assigned ISPs together.
|   تنها پروتکل مسیریابی که ما پوشش خواهیم داد بی‌جی‌پی است زیرا چسب اینترنت است و همه آی‌اس‌پی های اختصاص داده شده ای‌اس‌ان را به هم متصل می کند.


# speculation = حدس و گمان

The Border Gateway Protocol: BGP
|   (BGP) allows ASN-assigned ISPs to exchange routing information.    
|   BGP relies on trust between ISPs. 
|   If an ISP says it manages a specific network and all traffic destined 
|   for that network should be sent to it, the other ISPs trust this claim and send traffic accordingly.
|   As a result, BGP misconfigurations, or route leaks, often result in very public network outages.
|   در نتیجه، پیکربندی نادرست بی‌پی‌جی، یا نشت مسیر، اغلب منجر به قطع شبکه عمومی می شود.
|   
|   In 2008, Pakistan Telecommunications Company effectively took down YouTube worldwide after the Pakistani Ministry of Communications demanded the country block youtube.com in protest of a YouTube video.
|
|   In 2012, Google’s services were rerouted through Indonesia for 27 min-utes when the ISP Moratel shared a BGP route directing all Google traffic to Moratel’s network as if Moratel was now hosting Google’s network infrastruc-ture. 
|   
|   BGP usually makes news only when something goes wrong.
|   Other times, it plays the silent hero, serving a significant role in mitigating distributed denial-of-service (DDOS) attacks.




Name and Address Resolution: The Domain Name System(DNS)
|   (DNS) is a way of matching IP addresses to domain names, 
|   which are the names we enter in an address bar when we want to visit websites
|
|       the internet protocol uses IP addresses to locate hosts
|       domain names (like google.com) are easier for humans to understand and remember. 
|
|   All domains are children of a top-level domain. (TLD)
|   such as .com, .net, .org etc
|   
|   top-level domain from a registrar with the authority from IANA to register.
|
|   For example, maps.google.com is a subdomain of google.com.
|   A longer example is sub3.sub2.sub1.domain.com
|   If you enter https://nostarch.com in your web browser, your computer will consult its configured domain name resolver, a server that knows how to retrieve the answer to your query. The resolver will start by asking one of the 13 IANA-maintained root name servers for the IP address of nostarch.com. The root name server will examine the top-level domain of the domain you requested and give your resolver the address of the .com name server. Your resolver will then ask the .com name server for nostarch.com’s IP address, which will examine the domain portion and direct your resolver to ask No Starch Press’s name server. Finally, your resolver will ask No Starch Press’s name server and receive the IP address that corresponds to nostarch.com. Your web browser will establish a connection to this IP address, retrieve the web page, and render it for you. This hierarchical journey of domain resolu-tion allows you to zero in on a specific web server, and all you had to know was the domain name. No Starch Press is free to move its servers to a differ-ent ISP with new IP addresses, and yet you’ll still be able to visit its website by using nostarch.com.


Domain Name Resource Records: (DNS-R)
|   Resource records contain domain-specific information, used to satisfy domain name queries:
|       IP addresses, 
|       mail server hostnames, 
|       mail-handling rules,
|       authentication tokens.
|   
|   This section focuses on only the most common ones: 
|       address records, 
|       start-of-authority records, 
|       name server records, 
|       canonical name records, 
|       mail exchange records, 
|       pointer records,
|       text records.
|   
|   For more details on types of resource records:
|       https://en.wikipedia.org/wiki/List_of_DNS_record_types
|
|   exploration of each resource record:
|   ---> dig
|   
|   you can use the G Suite Toolbox Dig utility in a web browser:
|       https://toolbox.googleapps.com/apps/dig/



The Address Record:
|   The Address (A) record is the most common record you’ll query. 
|   An A record will resolve to one or more IPv4 addresses.
|   Listing 2-1   
|
|   Example Result:
|       ;; ANSWER SECTION:
|       google.com.		145	IN	A	142.250.181.238
|       
|   Number "145" is TTL :
|       TTL valuetells domain name resolvers how long to cache or remember the record, 
|       and it lets you know how long you have until the cached record expires.
|
|   When you request a DNS record, 
|   the domain name resolver will first check its cache. 
|   If the answer is in its cache, 
|   it will simply return the cached answer instead of asking the domain name server for the answer.
|
|   The AAAA resource record is the IPv6 equivalent of the A record.


The Start of Authority Record: (SOA)
|   (SOA) record contains authoritative and administrative details about the domain, as shown in Listing 2-2
|   Command:
|   dig google.com. soa

The Name Server Record: (NA) 
|   Command:
|   dig google.com. ns

The Canonical Name Record: CNAME
|   The Canonical Name (CNAME) record points one domain at another. 
|   CNAME records can make administration a bit easier.
|   Command:
|   dig mail.google.com. a

The Mail Exchange Record: MX
|   (MX) record specifies the mail server hostnames that should be contacted when sending email to recipients at the domain. 
|   Command:
|   dig google.com. mx

The Pointer Record: PTR
|   (PTR) record allows you to perform a reverse lookup by accepting an IP address and returning its corresponding domain name. 
|
|   See Wikipedia for more information on reverse DNS lookup: 
|   https://en.wikipedia.org/wiki/Reverse_DNS_lookup

The Text Record: TXT
|   (TXT) record allows the domain owner to return arbitrary text.
|   These records can contain values that prove domain ownership, 
|   values that remote mail servers can use to authorize email, 
|   and entries to specify which IP addresses may send mail on behalf of the domain, among other uses.
|   Command:
|   dig google.com. txt
|
|   The Facebook for Developers site has more information about domain verification at:
|   https://developers.facebook.com/docs/sharing/domain-verification/


Multicast DNS:
|   (m DNS) is a protocol that facilitates name resolution over a local area network (LAN) in the absence of a DNS server.


Privacy and Security Considerations of DNS Queries:
|   ملاحظات حفظ حریم خصوصی و امنیتی پرس و جوهای 
|   
|   DNS traffic is typically unencrypted when it traverses the internet. 
|   A poten-tial exception occurs if you’re connected to a virtual private network (VPN) 
|   and are careful to make sure all DNS traffic passes through its encrypted tunnel. 
|   Because of DNS’s unencrypted transport, unscrupulous ISPs or intermediate providers 
|   may glean sensitive information in your DNS que-ries and share those details with third parties. 
|   
|   Security is also a concern with plaintext DNS traffic. 
|   An attacker could convince your web browser to visit a malicious website 
|   by inserting a response to your DNS query. 
|   Considering the difficulty of pulling off such an attack, 
|   it’s not an attack you’re likely to experience, 
|   but it’s concerning nonethe-less. Since DNS servers often cache responses, 
|   this attack usually takes place between your device and the DNS server it’s configured to use. 
|   
|   RFC 7626
|   https://tools.ietf.org/html/rfc7626/   



Domain Name System Security Extensions: (DNSSEC)
|   you can ensure the authenticity of data sent over a network in two ways:
|   authenticating the content and authenticating the channel. 
|   Domain Name System Security Extensions(DNSSEC) is a method 
|   to prevent the covert modification of DNS responses in transit 
|       
|   by using digital signatures to authenticate the response.  
|       1- DNS over TLS
|       2- DNS over HTTPS
|


DNS over TLS:  (DoT)
|   detailed in RFC 7858:
|   https://tools.ietf.org/html/rfc7858/
|   
|   addresses both security and privacy concerns by using 
|   Transport Layer Security(TLS) to establish an encrypted connection between the client and its DNS server.
|   
|   TLS is a common protocol used to provide cryptographically secure communication between nodes on a network. 
|
|   LS, DNS requests and responses are fully encrypted in transit.
|
|   It does not need to rely on cryptographic signatures like DNSSEC because the entire conversation between
|    the DNS server and the client is encrypted.
|
|   
|
       
DNS over HTTPS: (DoH)  
|   detailed in RFC 8484:
|   https://tools.ietf.org/html/rfc8484/
|   
|   aims to address DNS security and privacy concerns while using a heavily used TCP port.
|   
|   DoH uses a common port and maps DNS requests and responses to HTTP requests and responses. 
|   Queries over HTTP can take advantage of all HTTP features, such as caching, compres-sion, proxying, and redirection.
|   
|   
|   
|   
|   
|   
   
Internet Control Message Protocol(ICMP)





























































































































































































